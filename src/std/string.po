namespace std
{
    // Gets the num of characters of a null terminated string.
    // @str The string
    // @size the size of the backing string array
    static i64 strlen(u8* str, u32 size)
    {
        //if (str == null || size >= (u32)128)
        //{
        //    return -1;
        //}
    
        u8[] arr = (u8[128])str;
    
        i64 count = 0;
        while (arr[count] != 0b && count < (i64)size) {
            count = count + 1;
        }
        
        return count;
    }
    
    //static void strcpy(u8* src, u32 srcSize, u8* dst, u32 dstSize)
    //{
    //    if (src == null || dst == null)
    //    {
    //        return;
    //    }       
    //}
    
    static boolean parseInt(u8* str, u32 size, i64* ret) {
        //if (str == null || size == (u32)0) {
        //    return -1;
        //}
        
        u8[] arr = (u8[128])str;
        i64 value = 0;
        i64 count = 0;
        boolean negative = false;
        if (arr[0] == '-') {
            negative = true;
            count += 1;
        }
        
        while (arr[count] != 0b && count < (i64)size) {
            u8 val = arr[count];
            if (val < (u8)'0' || val > (u8)'9') { break; }
            value *= 10;
            
            value += (i64) (val - (u8)'0');
            count += 1;
        }
        
        if (negative) {
            value *= -1;
        }
        
        *ret = value;
        return true;
    }

    static u32 toString(i64 value, u8* buffer, u32 size)
    {
        if (size == (u32)0)
        {
            return (u32)0; // Invalid buffer or size
        }

        u32 index = (u32)0;
        boolean isNegative = false;
        if (value < 0)
        {
            isNegative = true;
            value = -value;
        }

        u8[] outputBuffer = (u8[128])buffer;

        if (value == 0 && size > (u32)0)
        {
            outputBuffer[(i64)index] = '0';
            index += (u32)1;
        }

        while (value > 0 && index < size)
        {
            i64 remainder = value % 10;

            outputBuffer[(i64)index] = (u8)remainder + (u8)'0';
            index += (u32)1;
            value /= 10;
        } 

        if (isNegative == true && index < size)
        {
            outputBuffer[(i64)index] = '-';
            index = index + (u32)1;
        }

        // Reverse the string
        u32 count = index / (u32)2;
        for (u32 i = (u32)0; i < count; i = i + (u32)1)
        {
            u8 temp = outputBuffer[(i64)i];
            i64 src = (i64)index - (i64)i - 1;
            outputBuffer[(i64)i] = outputBuffer[src];
            outputBuffer[src] = temp;
        }

        // Null-terminate the string
        if (index < size)
        {
            outputBuffer[(i64)index] = 0b;
            index += (u32)1;
        }
        return index;
    }


}
